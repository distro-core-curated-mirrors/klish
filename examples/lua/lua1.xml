<?xml version="1.0" encoding="UTF-8"?>
<KLISH
  xmlns="https://klish.libcode.org/klish3"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="https://src.libcode.org/pkun/klish/src/master/klish.xsd">

<PLUGIN name="klish"/>
<PLUGIN name="lua"/>


<PTYPE name="INT" purpose="ptype">
  <ACTION sym="INT"/>
</PTYPE>


<VIEW name="main">

<HOTKEY key="^Z" cmd="exit"/>

<PROMPT name="prompt">
  <ACTION sym="prompt">%u@%h&gt; </ACTION>
</PROMPT>

<COMMAND name="exit" help="Exit view">
  <ACTION sym="nav">pop</ACTION>
  <ACTION sym="printl">Exiting klish session</ACTION>
</COMMAND>

<COMMAND name="luatest" help="Lua test">
  <PARAM name="int_val" help="Integer" ptype="/INT" min="1" max="3"/>
  <ACTION sym="lua">
  local pars = klish.pars()
  for k, v in ipairs(pars) do
    for i, p in ipairs(pars[v]) do
      print(string.format("%s[%d] = %s", v, i, p))
    end
  end
  </ACTION>
</COMMAND>

</VIEW>

</KLISH>
